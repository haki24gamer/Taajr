{% extends "admin_layout.html" %}

{% block content %}
<style>
    .carousel-item img {
      height: 300px;
      object-fit: cover;
    }
    .category-card img {
      height: 200px;
      object-fit: cover;
    }
    .product-card img {
      height: 300px;
      object-fit: cover;
    }
    .footer {
      background-color: #6096FD;
      color: white;
      padding: 20px 0;
    }
  </style>
        <h1 class="mb-4">Bienvenue, Administrateur !</h1>
        <p class="text-muted">Voici un aperçu de l’activité récente sur votre plateforme.</p>

        <!-- Stats Section -->
        <div class="row g-4">
            <div class="col-md-3">
                <div class="card text-center text-white bg-primary">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-users"></i> Utilisateurs</h5>
                        <p class="card-text fs-4">{{ num_users }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center text-white bg-success">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-box"></i> Offres</h5>
                        <p class="card-text fs-4">{{ num_offers }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center text-white bg-warning">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-shopping-cart"></i> Commandes</h5>
                        <p class="card-text fs-4">{{ num_pending }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center text-white bg-danger">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-user-plus"></i> Nouveaux Inscrits</h5>
                        <p class="card-text fs-7">{{ num_orders }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Table Section -->
        <div class="mt-5">
            <h2>Liste des utilisateurs</h2>
            <table class="table table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.ID_uti }}</td>
                        <td>{{ user.nom_uti }}</td>
                        <td>{{ user.prenom_uti }}</td>
                        <td>{{ user.email_uti }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="text-end">
                <a href="/admin/users" class="btn btn-primary">Plus</a>
            </div>

            <h2>Liste des Offres</h2>
            <table class="table table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Libellé</th>
                        <th>Prix (fdj)</th>
                        <th>Quantité en Stock</th>
                        <th>Propriétaire</th> <!-- New column -->
                    </tr>
                </thead>
                <tbody>
                    {% for offer in offers %}
                    <tr>
                        <td>{{ offer.ID_off }}</td>
                        <td>{{ offer.libelle_off }}</td>
                        <td>{{ offer.prix_off }}</td>
                        <td>{{ offer.quantite_en_stock }}</td>
                        <td>{{ offer.nom_uti }} {{ offer.prenom_uti }}</td> <!-- Owner info -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="text-end">
                <a href="/admin/offers" class="btn btn-primary">Plus</a>
            </div>

            <h2>Commandes en Attente</h2>
            <table class="table table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>ID Commande</th>
                        <th>ID Utilisateur</th>
                        <th>Statut</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in pending_orders %}
                    <tr>
                        <td>{{ order.ID_com }}</td>
                        <td>{{ order.ID_uti }}</td>
                        <td>{{ order.status_com }}</td>
                        <td>{{ order.date_com }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="text-end">
                <a href="/admin/pending_orders" class="btn btn-primary">Plus</a>
            </div>

            <h2>Toutes les Commandes</h2>
            <table class="table table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>ID Commande</th>
                        <th>ID Utilisateur</th>
                        <th>Statut</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr>
                        <td>{{ order.ID_com }}</td>
                        <td>{{ order.ID_uti }}</td>
                        <td>{{ order.status_com }}</td>
                        <td>{{ order.date_com }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="text-end">
                <a href="/admin/orders" class="btn btn-primary">Plus</a>
            </div>
        </div>
    </div>

{% endblock %}
